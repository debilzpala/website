<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NeoNCraf ‚Äì Serwer Minecraft</title>
  <link href="https://fonts.cdnfonts.com/css/minecraft-4" rel="stylesheet">
  <style>
    /* POPRAWKA FONTU: Wymuszenie czcionki 'Minecraft' dla wszystkich element√≥w */
    *{
        box-sizing:border-box;
        margin:0;
        padding:0;
        font-family:'Minecraft', 'Inter', sans-serif !important; 
    }

    /* Reszta Twoich styl√≥w CSS */
    :root{--bg1:#1b1f3b;--bg2:#0a0d1a;--text:#fff;--card:rgba(255,255,255,.05)}body.light{--bg1:#f4f6ff;--bg2:#dfe3ff;--text:#000;--card:rgba(0,0,0,.05)}body{background:radial-gradient(circle at top,var(--bg1),var(--bg2));color:var(--text);line-height:1.6;overflow-x:hidden}canvas{position:fixed;inset:0;z-index:-1}header{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:40px 20px}h1{font-size:clamp(3rem,6vw,5rem);font-weight:900;background:linear-gradient(90deg,#6cf,#9f6cff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:float 3s ease-in-out infinite}@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}.btns{display:flex;gap:20px;flex-wrap:wrap;justify-content:center}.btn{padding:14px 28px;border-radius:14px;text-decoration:none;font-weight:600;transition:.25s;cursor:pointer}.btn:hover{transform:scale(1.08) rotate(-1deg);box-shadow:0 15px 40px rgba(0,0,0,.4)}.primary{background:linear-gradient(90deg,#6cf,#9f6cff);color:#000}.secondary{border:2px solid #6cf;color:#6cf}section{padding:80px 20px;max-width:1200px;margin:auto}.features{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:30px}.card{background:var(--card);border-radius:24px;padding:30px;backdrop-filter:blur(14px);transition:.25s}.card:hover{transform:translateY(-10px) scale(1.03)}.toggle{position:fixed;top:20px;right:20px;width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#6cf,#9f6cff);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.4rem;z-index:10}#langToggle{top:80px}.creeper{width:80px;height:80px;margin:40px auto 0;background:linear-gradient(#4caf50,#2e7d32);border-radius:12px;position:relative;animation:walk 3s ease-in-out infinite}.creeper:before,.creeper:after{content:'';position:absolute;background:#000}.creeper:before{width:14px;height:14px;left:18px;top:20px;box-shadow:30px 0 0 #000}.creeper:after{width:18px;height:28px;left:31px;top:40px}@keyframes walk{0%,100%{transform:translateX(0)}50%{transform:translateY(-10px)}}

/* FINALNA POPRAWKA PRELOADERA: U≈ºycie tylko opacity do p≈Çynnego zanikania */
#preloader{
  position:fixed;
  inset:0;
  background:#050816;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
  font-size:1.2rem;
  opacity: 1; 
  transition: opacity 0.5s ease; 
}
#preloader.hidden { 
  opacity: 0 !important;
}
</style>
</head>
<body>
<div id="preloader"><div class="loader">≈Åadowanie Strony NeoNCraf...</div></div>
<canvas id="particles"></canvas>
<div id="themeToggle" class="toggle" onclick="toggleTheme()">üåô</div>
<div id="langToggle" class="toggle" style="top:80px" onclick="toggleLang()">üåç</div>
<div class="toggle" onclick="toggleTheme()">üåô</div>

<header>
  <div style="text-align:center;line-height:1.2">
  
</div>
<p data-pl="Nowoczesny serwer Minecraft nowej generacji." data-en="A modern next-generation Minecraft server.">
    Nowoczesny serwer Minecraft nowej generacji.
  </div>
    <h1 data-pl="NeoNCraf" data-en="NeoNCraf">NeoNCraf</h1>
  </div>
  
  </p>
<div class="btns">
  <a href="#" id="copyButton" class="btn primary">Skopiuj IP serwera</a>
  <a href="https://discord.gg/Ty9axmj8" target="_blank" class="btn secondary">Discord</a>
</div>
  
  <p class="ip">IP: <span id="ip">neoncraf_mc.aternos.me:34490</span></p>
</header>

<section>
  <div class="card" style="text-align:center; margin-bottom:40px">
    <h3 data-pl="üìä Status serwera" data-en="üìä Server status">üìä Status serwera</h3>
    <p id="status">Sprawdzanie...</p>
    <p data-pl="üë• Gracze online:" data-en="üë• Players online:">üë• Gracze online:</p>
    <p><span id="players">-</span></p>
    <p id="percent">-</p>
    <div class="creeper"></div>
  </div>
  </div>
  <div class="features">
    <div class="card">
      <h3>‚ö° Wydajno≈õƒá</h3>
      <p>Stabilny serwer, niski ping i brak lag√≥w ‚Äì gramy p≈Çynnie 24/7.</p>
    </div>
    <div class="card">
      <h3>üß© Unikalne tryby</h3>
      <p>Autorskie systemy, eventy i mechaniki, kt√≥rych nie znajdziesz nigdzie indziej.</p>
    </div>
    <div class="card">
      <h3>üë• Spo≈Çeczno≈õƒá</h3>
      <p>Aktywni gracze, pomocna administracja i ≈õwietna atmosfera.</p>
    </div>
    <div class="card">
      <h3>üîí Bezpiecze≈Ñstwo</h3>
      <p>Anty-cheat, backupy i ochrona danych graczy.</p>
    </div>
  </div>
</section>

<footer>
  ¬© 2025 NeoNCraf ‚Ä¢ Serwer Minecraft
</footer>

<script>
window.addEventListener('load', function() {
    const p = document.getElementById('preloader');
    if (p) {
        // Op√≥≈∫nienie ukrycia o 3000 ms (3 sekundy) od momentu pe≈Çnego za≈Çadowania strony
        setTimeout(() => {
            p.classList.add('hidden'); 
            
            setTimeout(() => {
                p.style.display = 'none';
            }, 500); 

        }, 3000); 
    }
});
</script>

<script>
window.addEventListener('load', function() {
    // Dzia≈ÇajƒÖca funkcja do kopiowania IP
    const copyButton = document.getElementById('copyButton');
    if (copyButton) {
        copyButton.addEventListener('click', function(event) {
            event.preventDefault(); 
            
            const ip = document.getElementById('ip').innerText;
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(ip)
                    .then(() => {
                        alert('‚úÖ IP skopiowane: ' + ip + ' (Metoda nowa)');
                    })
                    .catch(err => {
                        fallbackCopy(ip);
                    });
            } else {
                fallbackCopy(ip);
            }

            function fallbackCopy(text) {
                const tempInput = document.createElement('textarea');
                tempInput.value = text;
                tempInput.style.position = 'fixed';
                tempInput.style.opacity = '0';
                document.body.appendChild(tempInput);
                
                tempInput.select();
                tempInput.setSelectionRange(0, 99999);
                
                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        alert('‚úÖ IP Servera skopiowane IP to: ' + text + ' ()'); 
                    } else {
                        alert('‚ùå Nie uda≈Ço siƒô skopiowaƒá IP. Wci≈õnij Ctrl+C/Cmd+C: ' + text);
                    }
                } catch (err) {
                    alert('‚ùå B≈ÇƒÖd kopiowania. Spr√≥buj rƒôcznie: ' + text);
                }
                
                document.body.removeChild(tempInput);
            }
        });
    }
}); 


function toggleTheme(){ document.body.classList.toggle('light'); }

// particles
const c=document.getElementById('particles'),x=c.getContext('2d');
function resize(){c.width=innerWidth;c.height=innerHeight} resize(); onresize=resize;
let p=Array.from({length:60},()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*2+1,s:Math.random()+.2}));
function anim(){ x.clearRect(0,0,c.width,c.height); p.forEach(a=>{x.beginPath();x.arc(a.x,a.y,a.r,0,7);x.fillStyle='rgba(150,180,255,.6)';x.fill();a.y+=a.s;if(a.y>c.height)a.y=0}); requestAnimationFrame(anim)} anim();

// MC server status - OSTATECZNA POPRAWKA LOGIKI STANU
let lastOnline = undefined; // Zmieniamy null na undefined, aby uniknƒÖƒá b≈Çƒôd√≥w w pierwszym odczycie
function fetchStatus(){
  console.log('Sprawdzanie statusu serwera...');
  fetch('https://api.mcstatus.io/v2/status/java/neoncraf_mc.aternos.me:34490')
    .then(r => {
      if (!r.ok) {
        console.error('B≈ÇƒÖd HTTP z mcstatus.io:', r.status, r.statusText);
        throw new Error('B≈ÇƒÖd HTTP: ' + r.status);
      }
      return r.json();
    })
    .then(d=>{
      const motdText = (d.motd?.clean ?? '').toLowerCase();
      // Sprawdza, czy w tek≈õcie MOTD (wiadomo≈õci dnia) jest fraza sugerujƒÖca tryb "offline/lobby Aternos"
      const isAternosLobby = motdText.includes('offline') || motdText.includes('lobby') || motdText.includes('waiting');

      // Prawdziwy online tylko, je≈õli API zwraca online I nie ma frazy 'offline/lobby' w MOTD
      const currentStatus = d.online && !isAternosLobby; 
      
      const online=d.players?.online ?? 0;
      const max=d.players?.max ?? 0;

      // Wy≈õwietlanie statusu
      let statusDisplay;
      if (currentStatus) {
          statusDisplay = 'üü¢ ONLINE';
      } else if (d.online && isAternosLobby) {
          statusDisplay = 'üü° CZEKANIE (LOBBY)';
      } else {
          statusDisplay = 'üî¥ OFFLINE';
      }

      document.getElementById('status').innerText = statusDisplay;
      document.getElementById('players').innerText = online + ' / ' + max;
      document.getElementById('percent').innerText = max ? ('üìä ' + Math.round((online / max) * 100) + '%') : '';
      
      console.log('Aktualny Status (Gra): ' + currentStatus + '. Poprzedni Status: ' + lastOnline);
      
      // KLUCZOWA POPRAWKA LOGIKI WEBHOOKA: Wysy≈Çanie tylko przy ZMIANIE STANU
      if(lastOnline === undefined) {
        // Pomijamy wysy≈Çanie Webhooka przy pierwszym odczycie (inicjalizacja)
        lastOnline = currentStatus;
        return; 
      }
      
      if(lastOnline !== currentStatus) {
        if (currentStatus) {
            sendDiscord('üü¢ **NeoNCraf ONLINE**\nSerwer zosta≈Ç uruchomiony i jest gotowy do gry!');
        } else {
            sendDiscord('üî¥ **NeoNCraf OFFLINE**\nSerwer zosta≈Ç wy≈ÇƒÖczony lub wszed≈Ç w tryb oczekiwania (LOBBY).');
        }
        lastOnline = currentStatus; // Aktualizujemy stan po wys≈Çaniu powiadomienia
      }
    })
    .catch(e=>{
      console.error('B≈ÇƒÖd pobierania statusu serwera (sieƒá lub API):', e);
      document.getElementById('status').innerText='‚ö†Ô∏è B≈ÅƒÑD API'; 
      document.getElementById('players').innerText='-';
      document.getElementById('percent').innerText='';
      
      // Przy b≈Çƒôdzie API mo≈ºemy za≈Ço≈ºyƒá, ≈ºe serwer jest niedostƒôpny, ale nie wysy≈Çamy webhooka
      // aby uniknƒÖƒá spamu, je≈õli API jest d≈Çugo niedostƒôpne.
    });
}
fetchStatus();
setInterval(fetchStatus,1000);

/**
 * FUNKCJA sendDiscord
 */
function sendDiscord(msg){
  // URL podany przez Ciebie:
  const webhook = 'https://discordapp.com/api/webhooks/1450217665359642624/X9P7XIyJtZvQ7Ncqi0tn0_C3Qh4caj4S2gpB6Wm99lc4q8hZXgdEpkdD5wwoPz1jys6e'; 

  fetch(webhook, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ content: msg })
  })
  .then(response => {
      if (!response.ok) {
          console.error('B≈ÇƒÖd wysy≈Çania webhooka. Prawdopodobnie URL jest nieaktywny lub skasowany (status: ' + response.status + ').', response.statusText);
      }
  })
  .catch(error => {
      console.error('B≈ÇƒÖd po≈ÇƒÖczenia webhooka (sieƒá):', error);
  });
}

// language
let lang = navigator.language && navigator.language.startsWith('pl') ? 'pl' : 'en';
function toggleLang(){
  lang = lang==='pl'?'en':'pl';
  applyLang();
}
function applyLang(){
  document.querySelectorAll('[data-pl]').forEach(e=>{
    e.innerText = e.dataset[lang];
  });
}
applyLang();
</script>
</body>
</html>
